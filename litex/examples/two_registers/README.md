
# Two registers example

This example shows how to assign a register to another in the SRAM.


``` python

class TwoRegModule(Module, AutoCSR):
    def __init__(self):
        self.foo = CSRStorage(32)
        self.bar = CSRStorage(32)
        # We store it into sync, the memory access is synchronous
        # i.e. it needs a clock.
        self.sync += self.bar.storage.eq(self.foo.storage)

```

This instantiates our Migen module. 
With the wishbone tool it's possible to read the SPRAM location.

The addresses can be found inside `build/csr.csv` generated by migen.

``` text
#--------------------------------------------------------------------------------
# Auto-generated by Migen (562c046) & LiteX (f0b5c672) on 2020-02-07 17:45:09
#--------------------------------------------------------------------------------
csr_base,timer0,0x60002800,,
csr_base,two_reg_mod,0x60003000,,
csr_register,timer0_reload,0x60002810,4,rw
csr_register,timer0_load,0x60002800,4,rw
csr_register,two_reg_mod_bar,0x60003010,4,rw
csr_register,timer0_update_value,0x60002824,1,rw
csr_register,timer0_value,0x60002828,4,ro
csr_register,timer0_en,0x60002820,1,rw
csr_register,timer0_ev_status,0x60002838,1,rw
csr_register,two_reg_mod_foo,0x60003000,4,rw
csr_register,timer0_ev_pending,0x6000283c,1,rw
csr_register,timer0_ev_enable,0x60002840,1,rw
constant,config_cpu_type,none,,
constant,config_shadow_base,2147483648,,
constant,config_csr_alignment,32,,
constant,config_clock_frequency,12000000,,
constant,config_cpu_type_none,None,,
constant,config_csr_data_width,8,,
memory_region,csr,0x60000000,65536,cached
memory_region,sram,0x10000000,131072,cached
```

In our case, we can write in the 32 bit register foo and try to read
the same value in bar.

To write to foo:

``` shell
wishbone-tool 0x60003000 0x4
```
and then read from bar:

``` shell
wishbone-tool 0x60003010
```

From our investigation the AutoCSR seems to the thing
that performs the mapping with an actual address.
  
